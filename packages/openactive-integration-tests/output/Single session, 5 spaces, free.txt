

** Test Event **: 

{
  "@context": "https://openactive.io/",
  "@type": "ScheduledSession",
  "superEvent": {
    "@type": "SessionSeries",
    "name": "OpenActiveTestEvent2",
    "offers": [
      {
        "@type": "Offer",
        "price": 0
      }
    ]
  },
  "startDate": "2019-11-20T17:26:16.0731663+00:00",
  "endDate": "2019-11-20T19:12:16.0731663+00:00",
  "maximumAttendeeCapacity": 5
}


** Test Interface POST response: 204 **

NO CONTENT


** Opportunity RPDE excerpt **: 

{
  "state": "updated",
  "id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003",
  "modified": 1574780048675,
  "data": {
    "@context": "https://openactive.io/",
    "@type": "ScheduledSession",
    "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003",
    "superEvent": {
      "@context": "https://openactive.io/",
      "@type": "SessionSeries",
      "@id": "https://example.com/api/identifiers/api/session-series/100002",
      "name": "OpenActiveTestEvent2",
      "offers": [
        {
          "@type": "Offer",
          "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0",
          "price": 0
        }
      ],
      "organizer": {
        "@type": "Organization",
        "@id": "https://example.com/api/identifiers/api/sellers/0",
        "name": "Acme Fitness Ltd",
        "taxMode": "https://openactive.io/TaxGross"
      }
    },
    "startDate": "2019-11-20T17:26:16.0731663+00:00",
    "endDate": "2019-11-20T19:12:16.0731663+00:00"
  }
}
opportunityId: https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003; offerId: https://example.com/api/identifiers/api/session-series/100002#/offers/0


** REQUEST **: 

{
  "@context": "https://openactive.io/",
  "@type": "OrderQuote",
  "brokerRole": "https://openactive.io/AgentBroker",
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com",
    "description": "A fitness app for all the community",
    "logo": {
      "@type": "ImageObject",
      "url": "http://data.myfitnessapp.org.uk/images/logo.png"
    },
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Alan Peacock Way",
      "addressLocality": "Village East",
      "addressRegion": "Middlesbrough",
      "postalCode": "TS4 3AE",
      "addressCountry": "GB"
    }
  },
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0"
  },
  "orderedItem": [
    {
      "@type": "OrderItem",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0"
      },
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003"
      }
    }
  ]
}


** C1 response: ** 

{
  "@context": "https://openactive.io/",
  "@type": "OrderQuote",
  "@id": "https://localhost:44307/api/openbooking/orders/api/order-quote-templates/f58ecc79-87be-5476-9bf1-f5cfefae8f0e",
  "bookingService": {
    "@type": "BookingService",
    "name": "Acme booking system",
    "termsOfService": [
      {
        "@type": "PrivacyPolicy",
        "url": "https://example.com/privacy.html"
      }
    ],
    "url": "https://example.com"
  },
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com"
  },
  "brokerRole": "https://openactive.io/AgentBroker",
  "orderedItem": [
    {
      "@type": "OrderItem",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0",
        "price": 0,
        "priceCurrency": "GBP"
      },
      "allowCustomerCancellationFullRefund": true,
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003",
        "superEvent": {
          "@type": "SessionSeries",
          "@id": "https://example.com/api/identifiers/api/session-series/100002",
          "name": "OpenActiveTestEvent2"
        },
        "startDate": "2019-11-20T17:26:16.0731663+00:00",
        "endDate": "2019-11-20T19:12:16.0731663+00:00"
      },
      "unitTaxSpecification": [
        {
          "@type": "TaxChargeSpecification",
          "name": "VAT at 20%",
          "price": 0,
          "priceCurrency": "GBP",
          "rate": 0.2
        }
      ]
    }
  ],
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0",
    "name": "Acme Fitness Ltd",
    "taxMode": "https://openactive.io/TaxGross"
  },
  "totalPaymentDue": {
    "@type": "PriceSpecification",
    "price": 0,
    "priceCurrency": "GBP"
  },
  "totalPaymentTax": [
    {
      "@type": "TaxChargeSpecification",
      "name": "VAT at 20%",
      "price": 0,
      "priceCurrency": "GBP",
      "rate": 0.2
    }
  ]
}


** REQUEST **: 

{
  "@context": "https://openactive.io/",
  "@type": "OrderQuote",
  "brokerRole": "https://openactive.io/AgentBroker",
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com",
    "description": "A fitness app for all the community",
    "logo": {
      "@type": "ImageObject",
      "url": "http://data.myfitnessapp.org.uk/images/logo.png"
    },
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Alan Peacock Way",
      "addressLocality": "Village East",
      "addressRegion": "Middlesbrough",
      "postalCode": "TS4 3AE",
      "addressCountry": "GB"
    }
  },
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0"
  },
  "customer": {
    "@type": "Person",
    "email": "geoffcapes@example.com",
    "telephone": "020 811 8055",
    "givenName": "Geoff",
    "familyName": "Capes"
  },
  "orderedItem": [
    {
      "@type": "OrderItem",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0"
      },
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003"
      }
    }
  ]
}


** C2 response: ** 

{
  "@context": "https://openactive.io/",
  "@type": "OrderQuote",
  "@id": "https://localhost:44307/api/openbooking/orders/api/order-quotes/f58ecc79-87be-5476-9bf1-f5cfefae8f0e",
  "lease": {
    "@type": "Lease",
    "leaseExpires": "2019-11-26T14:59:09.420268+00:00"
  },
  "bookingService": {
    "@type": "BookingService",
    "name": "Acme booking system",
    "termsOfService": [
      {
        "@type": "PrivacyPolicy",
        "url": "https://example.com/privacy.html"
      }
    ],
    "url": "https://example.com"
  },
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com"
  },
  "brokerRole": "https://openactive.io/AgentBroker",
  "customer": {
    "@type": "Person",
    "email": "geoffcapes@example.com",
    "familyName": "Capes",
    "givenName": "Geoff",
    "telephone": "020 811 8055"
  },
  "orderedItem": [
    {
      "@type": "OrderItem",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0",
        "price": 0,
        "priceCurrency": "GBP"
      },
      "allowCustomerCancellationFullRefund": true,
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003",
        "superEvent": {
          "@type": "SessionSeries",
          "@id": "https://example.com/api/identifiers/api/session-series/100002",
          "name": "OpenActiveTestEvent2"
        },
        "startDate": "2019-11-20T17:26:16.0731663+00:00",
        "endDate": "2019-11-20T19:12:16.0731663+00:00"
      },
      "unitTaxSpecification": [
        {
          "@type": "TaxChargeSpecification",
          "name": "VAT at 20%",
          "price": 0,
          "priceCurrency": "GBP",
          "rate": 0.2
        }
      ]
    }
  ],
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0",
    "name": "Acme Fitness Ltd",
    "taxMode": "https://openactive.io/TaxGross"
  },
  "totalPaymentDue": {
    "@type": "PriceSpecification",
    "price": 0,
    "priceCurrency": "GBP"
  },
  "totalPaymentTax": [
    {
      "@type": "TaxChargeSpecification",
      "name": "VAT at 20%",
      "price": 0,
      "priceCurrency": "GBP",
      "rate": 0.2
    }
  ]
}


** REQUEST **: 

{
  "@context": "https://openactive.io/",
  "@type": "Order",
  "brokerRole": "https://openactive.io/AgentBroker",
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com",
    "description": "A fitness app for all the community",
    "logo": {
      "@type": "ImageObject",
      "url": "http://data.myfitnessapp.org.uk/images/logo.png"
    },
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Alan Peacock Way",
      "addressLocality": "Village East",
      "addressRegion": "Middlesbrough",
      "postalCode": "TS4 3AE",
      "addressCountry": "GB"
    }
  },
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0"
  },
  "customer": {
    "@type": "Person",
    "email": "geoffcapes@example.com",
    "telephone": "020 811 8055",
    "givenName": "Geoff",
    "familyName": "Capes"
  },
  "orderedItem": [
    {
      "@type": "OrderItem",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0"
      },
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003"
      }
    }
  ],
  "totalPaymentDue": {
    "@type": "PriceSpecification",
    "price": 0,
    "priceCurrency": "GBP"
  },
  "payment": {
    "@type": "Payment",
    "name": "AcmeBroker Points",
    "identifier": "1234567890npduy2f"
  }
}


** B response: **

{
  "@context": "https://openactive.io/",
  "@type": "Order",
  "@id": "https://localhost:44307/api/openbooking/orders/api/orders/f58ecc79-87be-5476-9bf1-f5cfefae8f0e",
  "bookingService": {
    "@type": "BookingService",
    "name": "Acme booking system",
    "termsOfService": [
      {
        "@type": "PrivacyPolicy",
        "url": "https://example.com/privacy.html"
      }
    ],
    "url": "https://example.com"
  },
  "broker": {
    "@type": "Organization",
    "name": "MyFitnessApp",
    "url": "https://myfitnessapp.example.com"
  },
  "brokerRole": "https://openactive.io/AgentBroker",
  "customer": {
    "@type": "Person",
    "email": "geoffcapes@example.com",
    "familyName": "Capes",
    "givenName": "Geoff",
    "telephone": "020 811 8055"
  },
  "orderedItem": [
    {
      "@type": "OrderItem",
      "@id": "https://localhost:44307/api/openbooking/orders/api/orders/f58ecc79-87be-5476-9bf1-f5cfefae8f0e#/orderedItems/100005",
      "acceptedOffer": {
        "@type": "Offer",
        "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0",
        "price": 0,
        "priceCurrency": "GBP"
      },
      "allowCustomerCancellationFullRefund": true,
      "orderedItem": {
        "@type": "ScheduledSession",
        "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003",
        "superEvent": {
          "@type": "SessionSeries",
          "@id": "https://example.com/api/identifiers/api/session-series/100002",
          "name": "OpenActiveTestEvent2"
        },
        "startDate": "2019-11-20T17:26:16.0731663+00:00",
        "endDate": "2019-11-20T19:12:16.0731663+00:00"
      },
      "orderItemStatus": "https://openactive.io/OrderConfirmed",
      "unitTaxSpecification": [
        {
          "@type": "TaxChargeSpecification",
          "name": "VAT at 20%",
          "price": 0,
          "priceCurrency": "GBP",
          "rate": 0.2
        }
      ]
    }
  ],
  "seller": {
    "@type": "Organization",
    "@id": "https://example.com/api/identifiers/api/sellers/0",
    "name": "Acme Fitness Ltd",
    "taxMode": "https://openactive.io/TaxGross"
  },
  "totalPaymentDue": {
    "@type": "PriceSpecification",
    "price": 0,
    "priceCurrency": "GBP"
  },
  "totalPaymentTax": [
    {
      "@type": "TaxChargeSpecification",
      "name": "VAT at 20%",
      "price": 0,
      "priceCurrency": "GBP",
      "rate": 0.2
    }
  ]
}


** REQUEST **: 

{
  "@context": "https://openactive.io/",
  "@type": "Order",
  "orderedItem": [
    {
      "@type": "OrderItem",
      "@id": "https://localhost:44307/api/openbooking/orders/api/orders/f58ecc79-87be-5476-9bf1-f5cfefae8f0e#/orderedItems/100005",
      "orderItemStatus": "https://openactive.io/CustomerCancelled"
    }
  ]
}


** Order Cancellation response: **

NO CONTENT


** Orders RPDE excerpt **: 

{
  "state": "updated",
  "kind": "Order",
  "id": "f58ecc79-87be-5476-9bf1-f5cfefae8f0e",
  "modified": 1574780049616,
  "data": {
    "@context": "https://openactive.io/",
    "@type": "Order",
    "@id": "https://localhost:44307/api/openbooking/orders/api/orders/f58ecc79-87be-5476-9bf1-f5cfefae8f0e",
    "broker": {
      "@type": "Organization",
      "name": "MyFitnessApp"
    },
    "brokerRole": "https://openactive.io/AgentBroker",
    "customer": {
      "@type": "Person",
      "email": "geoffcapes@example.com"
    },
    "orderedItem": [
      {
        "@type": "OrderItem",
        "@id": "https://localhost:44307/api/openbooking/orders/api/orders/f58ecc79-87be-5476-9bf1-f5cfefae8f0e#/orderedItems/100005",
        "acceptedOffer": {
          "@type": "Offer",
          "@id": "https://example.com/api/identifiers/api/session-series/100002#/offers/0",
          "price": 0,
          "priceCurrency": "GBP"
        },
        "orderedItem": {
          "@type": "ScheduledSession",
          "@id": "https://example.com/api/identifiers/api/scheduled-sessions/100002/events/100003"
        },
        "orderItemStatus": "https://openactive.io/CustomerCancelled"
      }
    ],
    "payment": {
      "@type": "Payment"
    },
    "seller": {
      "@type": "Organization",
      "@id": "https://example.com/api/identifiers/api/sellers/0",
      "name": "Acme Fitness Ltd",
      "taxMode": "https://openactive.io/TaxGross"
    },
    "totalPaymentDue": {
      "@type": "PriceSpecification",
      "price": 0,
      "priceCurrency": "GBP"
    }
  }
}


** Test Interface DELETE response: 204 **

NO CONTENT


** Orders DELETE response: 204 **

NO CONTENT
