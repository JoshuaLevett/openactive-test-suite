[< Return to Summary](summary.md) | File Generated: Fri Sep 11 2020 10:34:21 GMT+0000 (Coordinated Universal Time)

# multiple-sellers >> conflicting-seller (ScheduledSession)

Feature Implemented: true

Runs C1, C2 and B where Sellers of OrderItems do not match and check SellerMismatchError is returned in all cases.

---

‚ö†Ô∏è 10 passed with 0 failures, 46 warnings and 16 suggestions 

---


## 

### Local Microservice Test Interface for OrderItem 0 Request
POST http://localhost:3000/test-interface/datasets/uat-ci/opportunities

---

Response status code: 200 OK. Responded in 44.973996ms
```json
{
  "@context": "https://openactive.io/",
  "@type": "ScheduledSession",
  "@id": "https://localhost:5001/api/identifiers/scheduled-sessions/47/events/476"
}
```

### Local Microservice Test Interface for OrderItem 1 Request
POST http://localhost:3000/test-interface/datasets/uat-ci/opportunities

---

Response status code: 200 OK. Responded in 14.311381ms
```json
{
  "@context": "https://openactive.io/",
  "@type": "ScheduledSession",
  "@id": "https://localhost:5001/api/identifiers/scheduled-sessions/1/events/14"
}
```

## Get Opportunity Feed Items

### Opportunity Feed extract for OrderItem 0 Request
GET http://localhost:3000/opportunity/https%3A%2F%2Flocalhost%3A5001%2Fapi%2Fidentifiers%2Fscheduled-sessions%2F47%2Fevents%2F476?useCacheIfAvailable=true

---

Response status code: 200 OK. Responded in 10.17817ms
```json
{
  "data": {
    "@context": "https://openactive.io/",
    "@type": "ScheduledSession",
    "@id": "https://localhost:5001/api/identifiers/scheduled-sessions/47/events/476",
    "superEvent": {
      "@type": "SessionSeries",
      "@id": "https://localhost:5001/api/identifiers/session-series/47",
      "name": "Steel Walking",
      "activity": [
        {
          "@type": "Concept",
          "@id": "https://openactive.io/activity-list#c07d63a0-8eb9-4602-8bcc-23be6deb8f83",
          "inScheme": "https://openactive.io/activity-list",
          "prefLabel": "Jet Skiing"
        }
      ],
      "location": {
        "@type": "Place",
        "name": "Fake Pond",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "GB",
          "addressLocality": "Another town",
          "addressRegion": "Oxfordshire",
          "postalCode": "OX1 1AA",
          "streetAddress": "1 Fake Park"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 0.1,
          "longitude": 0.1
        }
      },
      "offers": [
        {
          "@type": "Offer",
          "@id": "https://localhost:5001/api/identifiers/session-series/47#/offers/0",
          "availableChannel": [
            "https://openactive.io/OpenBookingPrepayment"
          ],
          "price": 0,
          "priceCurrency": "GBP"
        }
      ],
      "organizer": {
        "@type": "Organization",
        "@id": "https://localhost:5001/api/identifiers/sellers/1",
        "name": "Acme Fitness Ltd",
        "taxMode": "https://openactive.io/TaxGross"
      },
      "url": "https://www.example.com/a-session-age"
    },
    "duration": "PT2H33M",
    "maximumAttendeeCapacity": 20,
    "remainingAttendeeCapacity": 20,
    "startDate": "2020-09-20T00:19:00+00:00",
    "endDate": "2020-09-20T02:52:00+00:00"
  }
}
```

### Opportunity Feed extract for OrderItem 1 Request
GET http://localhost:3000/opportunity/https%3A%2F%2Flocalhost%3A5001%2Fapi%2Fidentifiers%2Fscheduled-sessions%2F1%2Fevents%2F14?useCacheIfAvailable=true

---

Response status code: 200 OK. Responded in 6.548174ms
```json
{
  "data": {
    "@context": "https://openactive.io/",
    "@type": "ScheduledSession",
    "@id": "https://localhost:5001/api/identifiers/scheduled-sessions/1/events/14",
    "superEvent": {
      "@type": "SessionSeries",
      "@id": "https://localhost:5001/api/identifiers/session-series/1",
      "name": "Rubber Yoga",
      "activity": [
        {
          "@type": "Concept",
          "@id": "https://openactive.io/activity-list#c07d63a0-8eb9-4602-8bcc-23be6deb8f83",
          "inScheme": "https://openactive.io/activity-list",
          "prefLabel": "Jet Skiing"
        }
      ],
      "location": {
        "@type": "Place",
        "name": "Fake Pond",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "GB",
          "addressLocality": "Another town",
          "addressRegion": "Oxfordshire",
          "postalCode": "OX1 1AA",
          "streetAddress": "1 Fake Park"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 0.1,
          "longitude": 0.1
        }
      },
      "offers": [
        {
          "@type": "Offer",
          "@id": "https://localhost:5001/api/identifiers/session-series/1#/offers/0",
          "availableChannel": [
            "https://openactive.io/OpenBookingPrepayment"
          ],
          "price": 0,
          "priceCurrency": "GBP"
        }
      ],
      "organizer": {
        "@type": "Person",
        "@id": "https://localhost:5001/api/identifiers/sellers/2",
        "name": "Jane Smith",
        "taxMode": "https://openactive.io/TaxGross"
      },
      "url": "https://www.example.com/a-session-age"
    },
    "duration": "PT5H25M",
    "maximumAttendeeCapacity": 32,
    "remainingAttendeeCapacity": 32,
    "startDate": "2020-09-14T01:58:08+00:00",
    "endDate": "2020-09-14T07:23:08+00:00"
  }
}
```
### Specs
* ‚úÖ should return 200 on success for request relevant to OrderItem 0
* ‚úÖ should return 200 on success for request relevant to OrderItem 1

## Get Opportunity Feed Items >> validation of Opportunity Feed extract for OrderItem 0
### Specs
* ‚úÖ passes validation checks
* ‚úÖ matches the criteria 'TestOpportunityBookable' required for this test

### Validations
 * ‚ö†Ô∏è $.eventStatus: Recommended property `eventStatus` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.leader: Recommended property `leader` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.url: Recommended property `url` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.isAccessibleForFree: Where a `ScheduledSession` has at least one Offer with `price` set to `0`, it should also have a property named `isAccessibleForFree` set to `true`.
 * ‚ö†Ô∏è $.superEvent.description: Recommended property `description` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.image: Recommended property `image` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.ageRange: Recommended property `ageRange` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.genderRestriction: Recommended property `genderRestriction` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.leader: Recommended property `leader` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.level: Recommended property `level` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.isAccessibleForFree: Where a `SessionSeries` has at least one Offer with `price` set to `0`, it should also have a property named `isAccessibleForFree` set to `true`.
 * ‚ö†Ô∏è $.superEvent.location.id: Recommended property `@id` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.url: Recommended property `url` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.description: Recommended property `description` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.image: Recommended property `image` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.telephone: Recommended property `telephone` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.openingHoursSpecification: Recommended property `openingHoursSpecification` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.amenityFeature: Recommended property `amenityFeature` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.offers[0].name: Recommended property `name` is missing from `Offer`.
 * ‚ö†Ô∏è $.superEvent.offers[0].ageRange: Recommended property `ageRange` is missing from `Offer`.
 * ‚ö†Ô∏è $.superEvent.organizer.url: Recommended property `url` is missing from `Organization`.
 * ‚ö†Ô∏è $.superEvent.organizer.telephone: Recommended property `telephone` is missing from `Organization`.
 * ‚ö†Ô∏è $.superEvent.organizer.sameAs: Recommended property `sameAs` is missing from `Organization`.
 * üìù $.genderRestriction: Data consumers will assume that there is no gender restriction when no valid `genderRestriction` is supplied on a `ScheduledSession`.
 * üìù $.ageRange: Data consumers will assume that the `ageRange` is 18+ when not specified.
 * üìù $.eventStatus: Data consumers will assume the `eventStatus` is scheduled if not specified or invalid.
 * üìù $.superEvent.genderRestriction: Data consumers will assume that there is no gender restriction when no valid `genderRestriction` is supplied on a `SessionSeries`.
 * üìù $.superEvent.ageRange: Data consumers will assume that the `ageRange` is 18+ when not specified.
 * üìù $.superEvent.eventStatus: Data consumers will assume the `eventStatus` is scheduled if not specified or invalid.
 * üìù $.superEvent.location.geo.latitude: The value of this property should have at least 3 decimal places. Note that this notice will also appear when trailing zeros have been truncated.
 * üìù $.superEvent.location.geo.longitude: The value of this property should have at least 3 decimal places. Note that this notice will also appear when trailing zeros have been truncated.

## Get Opportunity Feed Items >> validation of Opportunity Feed extract for OrderItem 1
### Specs
* ‚úÖ passes validation checks
* ‚úÖ matches the criteria 'TestOpportunityBookable' required for this test

### Validations
 * ‚ö†Ô∏è $.eventStatus: Recommended property `eventStatus` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.leader: Recommended property `leader` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.url: Recommended property `url` is missing from `ScheduledSession`.
 * ‚ö†Ô∏è $.isAccessibleForFree: Where a `ScheduledSession` has at least one Offer with `price` set to `0`, it should also have a property named `isAccessibleForFree` set to `true`.
 * ‚ö†Ô∏è $.superEvent.description: Recommended property `description` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.image: Recommended property `image` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.ageRange: Recommended property `ageRange` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.genderRestriction: Recommended property `genderRestriction` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.leader: Recommended property `leader` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.level: Recommended property `level` is missing from `SessionSeries`.
 * ‚ö†Ô∏è $.superEvent.isAccessibleForFree: Where a `SessionSeries` has at least one Offer with `price` set to `0`, it should also have a property named `isAccessibleForFree` set to `true`.
 * ‚ö†Ô∏è $.superEvent.location.id: Recommended property `@id` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.url: Recommended property `url` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.description: Recommended property `description` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.image: Recommended property `image` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.telephone: Recommended property `telephone` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.openingHoursSpecification: Recommended property `openingHoursSpecification` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.location.amenityFeature: Recommended property `amenityFeature` is missing from `Place`.
 * ‚ö†Ô∏è $.superEvent.offers[0].name: Recommended property `name` is missing from `Offer`.
 * ‚ö†Ô∏è $.superEvent.offers[0].ageRange: Recommended property `ageRange` is missing from `Offer`.
 * üìù $.genderRestriction: Data consumers will assume that there is no gender restriction when no valid `genderRestriction` is supplied on a `ScheduledSession`.
 * üìù $.ageRange: Data consumers will assume that the `ageRange` is 18+ when not specified.
 * üìù $.eventStatus: Data consumers will assume the `eventStatus` is scheduled if not specified or invalid.
 * üìù $.superEvent.genderRestriction: Data consumers will assume that there is no gender restriction when no valid `genderRestriction` is supplied on a `SessionSeries`.
 * üìù $.superEvent.ageRange: Data consumers will assume that the `ageRange` is 18+ when not specified.
 * üìù $.superEvent.eventStatus: Data consumers will assume the `eventStatus` is scheduled if not specified or invalid.
 * üìù $.superEvent.location.geo.latitude: The value of this property should have at least 3 decimal places. Note that this notice will also appear when trailing zeros have been truncated.
 * üìù $.superEvent.location.geo.longitude: The value of this property should have at least 3 decimal places. Note that this notice will also appear when trailing zeros have been truncated.

## C1

### C1 Request
PUT https://localhost:5001/api/openbooking/order-quote-templates/849c7292-fffe-5ad6-88e6-5a1cb0fe513c

---

Response status code: 500 Internal Server Error. Responded in 109.196296ms
```json
{
  "@context": "https://openactive.io/",
  "@type": "SellerMismatchError",
  "name": "At least one of the 'OrderItem's did not match the specified 'seller'.",
  "statusCode": 500,
  "description": "OrderItem at position 1 did not match the specified SellerId"
}
```
### Specs
* ‚úÖ should return 500
* ‚úÖ Should return a SellerMismatchError

## C1 >> validation of C1
### Specs
* ‚úÖ passes validation checks

### Validations
 * ‚ö†Ô∏è $.instance: Recommended property `instance` is missing from `SellerMismatchError`.

## C2

### C2 Request
PUT https://localhost:5001/api/openbooking/order-quotes/849c7292-fffe-5ad6-88e6-5a1cb0fe513c

---

Response status code: 500 Internal Server Error. Responded in 50.050023ms
```json
{
  "@context": "https://openactive.io/",
  "@type": "SellerMismatchError",
  "name": "At least one of the 'OrderItem's did not match the specified 'seller'.",
  "statusCode": 500,
  "description": "OrderItem at position 1 did not match the specified SellerId"
}
```
### Specs
* ‚úÖ should return 500
* ‚úÖ Should return a SellerMismatchError

## C2 >> validation of C2
### Specs
* ‚úÖ passes validation checks

### Validations
 * ‚ö†Ô∏è $.instance: Recommended property `instance` is missing from `SellerMismatchError`.

## B

### B Request
PUT https://localhost:5001/api/openbooking/orders/849c7292-fffe-5ad6-88e6-5a1cb0fe513c

---

Response status code: 500 Internal Server Error. Responded in 40.229763ms
```json
{
  "@context": "https://openactive.io/",
  "@type": "SellerMismatchError",
  "name": "At least one of the 'OrderItem's did not match the specified 'seller'.",
  "statusCode": 500,
  "description": "OrderItem at position 1 did not match the specified SellerId"
}
```
### Specs
* ‚úÖ should return 500
* ‚úÖ Should return a SellerMismatchError

## B >> validation of B
### Specs
* ‚úÖ passes validation checks

### Validations
 * ‚ö†Ô∏è $.instance: Recommended property `instance` is missing from `SellerMismatchError`.


